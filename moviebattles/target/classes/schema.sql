ALTER TABLE IF EXISTS PARTIDA DROP CONSTRAINT IF EXISTS FK_PARTIDA_FILME;
ALTER TABLE IF EXISTS PARTIDA DROP CONSTRAINT IF EXISTS FK_PARTIDA_JOGADOR;
ALTER TABLE IF EXISTS PARTIDA DROP CONSTRAINT IF EXISTS FK_PARTIDA_JOGO;
ALTER TABLE IF EXISTS RANKING DROP CONSTRAINT IF EXISTS FK_RANKING_JOGADOR;
ALTER TABLE IF EXISTS JOGO DROP CONSTRAINT IF EXISTS FK_JOGO_JOGADOR;

DROP TABLE IF EXISTS FILME;  
CREATE TABLE FILME (  
ID INT AUTO_INCREMENT  PRIMARY KEY,  
TITULO VARCHAR(50) NOT NULL,  
IMAGEM VARCHAR(250) NOT NULL,
NOTA DECIMAL NOT NULL
); 

DROP TABLE IF EXISTS JOGADOR;  
CREATE TABLE JOGADOR (  
ID INT AUTO_INCREMENT  PRIMARY KEY,  
NOME VARCHAR(50) NOT NULL,
PERMISSAO VARCHAR(50) NOT NULL
); 

DROP TABLE IF EXISTS JOGO; 
CREATE TABLE JOGO (  
ID INT AUTO_INCREMENT  PRIMARY KEY,  
JOGADOR_ID INT,
TENTATIVAS INT,
CONCLUIDO boolean,

CONSTRAINT FK_JOGO_JOGADOR FOREIGN KEY (JOGADOR_ID) REFERENCES JOGADOR(ID)
);

DROP TABLE IF EXISTS PARTIDA; 
CREATE TABLE PARTIDA (  
ID INT AUTO_INCREMENT  PRIMARY KEY,  
FILME_ID INT,
JOGADOR_ID INT,
JOGO_ID INT,
PONTUACAO INT,
CONCLUIDO boolean,

CONSTRAINT FK_PARTIDA_FILME FOREIGN KEY (FILME_ID) REFERENCES FILME(ID),
CONSTRAINT FK_PARTIDA_JOGADOR FOREIGN KEY (JOGADOR_ID) REFERENCES JOGADOR(ID),
CONSTRAINT FK_PARTIDA_JOGO FOREIGN KEY (JOGO_ID) REFERENCES JOGO(ID)
);




DROP TABLE IF EXISTS RANKING;  
CREATE TABLE RANKING (  
ID INT AUTO_INCREMENT  PRIMARY KEY,  
JOGADOR_ID INT,
PONTUACAO INT,

CONSTRAINT FK_RANKING_JOGADOR FOREIGN KEY (JOGADOR_ID) REFERENCES JOGADOR(ID)
);

